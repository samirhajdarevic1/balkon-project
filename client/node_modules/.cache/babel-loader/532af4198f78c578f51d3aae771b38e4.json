{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\balkon-project\\\\client\\\\src\\\\components\\\\ZakljucnaOcjena.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { dodajZakljucnuOcjenu, ucitajZakljucnuOcjenu } from '../redux/zakljucnaOcjena/actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ZakljucnaOcjena = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    idUcenik,\n    idRazred,\n    idPredmet\n  } = useParams();\n  console.log(1, idUcenik, idRazred, idPredmet);\n  const [zakljOcj, setZakljOcj] = useState('');\n  const [currentRazred] = useSelector(state => state.razredi.items.filter(razred => razred.idRazred === +idRazred));\n  const ucenikoveOcjene = useSelector(state => state.ocjene.items);\n  const zakljucnaOcjena = useSelector(state => state.zakljucneOcjene.items);\n  console.log(1111, zakljucnaOcjena);\n  const pojedinacneOcjene = ucenikoveOcjene.map(ocjena => ocjena.ocjena);\n  const prosjek = pojedinacneOcjene.reduce((total, curr) => {\n    return +total + +curr / pojedinacneOcjene.length;\n  }, 0);\n\n  const zakljucnaOcjenaSubmitHandler = e => {\n    if (ucenikoveOcjene) {\n      console.log(e.target.zakljucnaOcjena.value);\n      e.preventDefault();\n      const zakljOcjena = {\n        idUcenik: +idUcenik,\n        idPredmet: +idPredmet,\n        idSkolskaGodina: currentRazred.idSkolskaGodina,\n        zakljucnaOcjena: zakljOcj\n      };\n      console.log(zakljOcjena);\n      dispatch(dodajZakljucnuOcjenu(zakljOcjena));\n    }\n  };\n\n  useEffect(() => {\n    if (ucenikoveOcjene.length > 0) {\n      dispatch(ucitajZakljucnuOcjenu(idUcenik, idPredmet, currentRazred.idSkolskaGodina));\n    }\n  }, [idUcenik, idRazred, idPredmet, currentRazred.idSkolskaGodina, zakljucnaOcjena.idZakljucnaOcjena]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Prosjek ocjena\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      defaultValue: prosjek.toFixed(2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: zakljucnaOcjenaSubmitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Zakljucna ocjena\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), idPredmet && zakljucnaOcjena.length !== [] ? /*#__PURE__*/_jsxDEV(\"input\", {\n        defaultValue: zakljucnaOcjena[0].zakljucnaOcjena\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"zakljucnaOcjena\",\n          value: zakljOcj,\n          onChange: e => setZakljOcj(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ZakljucnaOcjena, \"OBnEST8b+haIDy4eOmLStty9maY=\", false, function () {\n  return [useDispatch, useParams, useSelector, useSelector, useSelector];\n});\n\n_c = ZakljucnaOcjena;\nexport default ZakljucnaOcjena;\n\nvar _c;\n\n$RefreshReg$(_c, \"ZakljucnaOcjena\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","useParams","dodajZakljucnuOcjenu","ucitajZakljucnuOcjenu","ZakljucnaOcjena","dispatch","idUcenik","idRazred","idPredmet","console","log","zakljOcj","setZakljOcj","currentRazred","state","razredi","items","filter","razred","ucenikoveOcjene","ocjene","zakljucnaOcjena","zakljucneOcjene","pojedinacneOcjene","map","ocjena","prosjek","reduce","total","curr","length","zakljucnaOcjenaSubmitHandler","e","target","value","preventDefault","zakljOcjena","idSkolskaGodina","idZakljucnaOcjena","toFixed"],"sources":["C:/Users/pc/Desktop/balkon-project/client/src/components/ZakljucnaOcjena.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport {\r\n  dodajZakljucnuOcjenu,\r\n  ucitajZakljucnuOcjenu,\r\n} from '../redux/zakljucnaOcjena/actions';\r\n\r\nconst ZakljucnaOcjena = () => {\r\n  const dispatch = useDispatch();\r\n  const { idUcenik, idRazred, idPredmet } = useParams();\r\n  console.log(1, idUcenik, idRazred, idPredmet);\r\n  const [zakljOcj, setZakljOcj] = useState('');\r\n  const [currentRazred] = useSelector((state) =>\r\n    state.razredi.items.filter((razred) => razred.idRazred === +idRazred)\r\n  );\r\n  const ucenikoveOcjene = useSelector((state) => state.ocjene.items);\r\n  const zakljucnaOcjena = useSelector((state) => state.zakljucneOcjene.items);\r\n  console.log(1111, zakljucnaOcjena);\r\n  const pojedinacneOcjene = ucenikoveOcjene.map((ocjena) => ocjena.ocjena);\r\n  const prosjek = pojedinacneOcjene.reduce((total, curr) => {\r\n    return +total + +curr / pojedinacneOcjene.length;\r\n  }, 0);\r\n\r\n  const zakljucnaOcjenaSubmitHandler = (e) => {\r\n    if (ucenikoveOcjene) {\r\n      console.log(e.target.zakljucnaOcjena.value);\r\n      e.preventDefault();\r\n      const zakljOcjena = {\r\n        idUcenik: +idUcenik,\r\n        idPredmet: +idPredmet,\r\n        idSkolskaGodina: currentRazred.idSkolskaGodina,\r\n        zakljucnaOcjena: zakljOcj,\r\n      };\r\n      console.log(zakljOcjena);\r\n      dispatch(dodajZakljucnuOcjenu(zakljOcjena));\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (ucenikoveOcjene.length > 0) {\r\n      dispatch(\r\n        ucitajZakljucnuOcjenu(\r\n          idUcenik,\r\n          idPredmet,\r\n          currentRazred.idSkolskaGodina\r\n        )\r\n      );\r\n    }\r\n  }, [\r\n    idUcenik,\r\n    idRazred,\r\n    idPredmet,\r\n    currentRazred.idSkolskaGodina,\r\n    zakljucnaOcjena.idZakljucnaOcjena,\r\n  ]);\r\n\r\n  return (\r\n    <>\r\n      <label>Prosjek ocjena</label>\r\n      <input defaultValue={prosjek.toFixed(2)}></input>\r\n      <form onSubmit={zakljucnaOcjenaSubmitHandler}>\r\n        <label>Zakljucna ocjena</label>\r\n        {idPredmet && zakljucnaOcjena.length !== [] ? (\r\n          <input defaultValue={zakljucnaOcjena[0].zakljucnaOcjena}></input>\r\n        ) : (\r\n          <>\r\n            <input\r\n              name=\"zakljucnaOcjena\"\r\n              value={zakljOcj}\r\n              onChange={(e) => setZakljOcj(e.target.value)}\r\n            />\r\n            <button type=\"submit\">Submit</button>\r\n          </>\r\n        )}\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ZakljucnaOcjena;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}